Тестовое задание на Аналитику
Выполнил студент группы ИСдо-35
 Гудалов Михаил
1) Бизнес-процесс создания заказа
Процесс создания заказа в приложении "Частная пекарня" включает следующие шаги:
1. Пользователь выбирает выпечку.
2. Пользователь добавляет выбранные товары в корзину.
3. Пользователь переходит к оформлению заказа.
4. Пользователь вводит персональные данные (имя, телефон, адрес доставки).
5. Пользователь выбирает способ оплаты.
6. Пользователь подтверждает заказ.
7. Система создает заказ.
8. Система отправляет уведомление о создании заказа.
2) Процесс синхронизации данных между клиентом и сервером
Для синхронизации данных между клиентом и сервером используются следующие API методы:
• Создание заказа
• Метод: POST /api/orders
• Параметры:
• userId: ID пользователя
• items: массив товаров (ID, количество)
• shippingAddress: адрес доставки
• Ответ:
• orderId: ID созданного заказа
• status: статус заказа
• Редактирование заказа
• Метод: PUT /api/orders/{orderId}
• Параметры:
• items: обновленный массив товаров (ID, количество)
• shippingAddress: обновленный адрес доставки
• Ответ:
• status: статус обновленного заказа
• Отмена заказа
• Метод: DELETE /api/orders/{orderId}
• Ответ:
• status: статус отмены заказа
• Изменение персональных данных
• Метод: PUT /api/users/{userId}
• Параметры:
• name: новое имя
• email: новый email
• Ответ:
• status: статус обновления данных
• Оплата заказа
• Метод: POST /api/orders/{orderId}/pay
• Параметры:
• paymentMethod: способ оплаты
• Ответ:
• status: статус оплаты
ER-диаграмма предоставлена в html файле и png под названием 
2 пункт.drawio
3) Прототип экрана создания заказа
Экран создания заказа должен содержать следующие элементы:
• Заголовок: "Создание заказа"
• Поля ввода:
• Имя получателя
• Номер телефона
• Адрес доставки
• Список товаров:
• Название товара
• Количество (с возможностью изменения)
• Кнопка "Подтвердить заказ"
• Кнопка "Отмена"
В html-файле и png предоставлен пользовательский интерфейс
Файл называется 3 пункт.drawio
4) Подробное описание функции редактирования заказа
Функция редактирования заказа позволяет пользователю изменять содержимое уже созданного заказа, включая товары и адрес доставки.
Используемые API методы для редактирования заказа:
• Метод: PUT /api/orders/{orderId}
• Параметры:
• items: массив обновленных товаров (ID, количество)
• shippingAddress: обновленный адрес доставки
• Ответ:
• status: статус обновленного заказа
Процесс хранения информации о покупках пользователя:
Информация о покупках пользователя хранится в базе данных в таблицах, связанных с сущностями User, Order и OrderItem. При редактировании заказа:
1. Пользователь отправляет запрос на изменение.
2. Сервер проверяет права доступа и корректность данных.
3. Обновляются записи в таблицах Order и OrderItem.
4. Сервер отправляет подтверждение об успешном обновлении.
UML диаграмма активности редактирования заказа предоставлена в html файле и png под названием 4 пункт.drawio
5)SQL-запросы
1. Вывести покупателей с количеством осуществленных покупок:
SELECT 
    u.userId,
    u.name,
    COUNT(o.orderId) AS purchase_count
FROM 
    Users u
LEFT JOIN 
    Orders o ON u.userId = o.userId
GROUP BY 
    u.userId, u.name;
2. Общую стоимость товаров для каждого покупателя и отсортировать результат в порядке убывания:
SELECT 
    u.userId,
    u.name,
    SUM(oi.quantity * p.price) AS total_spent
FROM 
    Users u
JOIN 
    Orders o ON u.userId = o.userId
JOIN 
    OrderItems oi ON o.orderId = oi.orderId
JOIN 
    Products p ON oi.productId = p.productId
GROUP BY 
    u.userId, u.name
ORDER BY 
    total_spent DESC;
3. Получить покупателей, купивших только один товар:
SELECT 
    u.userId,
    u.name
FROM 
    Users u
JOIN 
    Orders o ON u.userId = o.userId
JOIN 
    OrderItems oi ON o.orderId = oi.orderId
GROUP BY 
    u.userId, u.name
HAVING 
    COUNT(oi.productId) = 1;
